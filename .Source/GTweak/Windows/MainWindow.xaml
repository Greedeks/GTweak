<ui:FluentWindow x:Class="GTweak.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:GTweak.Core.ViewModel"
        xmlns:uc="clr-namespace:GTweak.Assets.UserControl"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:local="clr-namespace:GTweak"
        mc:Ignorable="d" Icon="/GTweak.ico"
        Background="Transparent" WindowStyle="None" IsTabStop="False" KeyboardNavigation.TabNavigation="None" FocusVisualStyle="{x:Null}" SnapsToDevicePixels="True" UseLayoutRounding="True"
        ExtendsContentIntoTitleBar="True" WindowBackdropType="Mica" MinWidth="700" MinHeight="400"
        Title="GTweak" d:Height="616" d:Width="1094" Loaded="Window_Loaded" Topmost="{Binding IsTopMost}">
    <ui:FluentWindow.DataContext>
        <vm:MainWinViewModel/>
    </ui:FluentWindow.DataContext>
    <Grid Background="{StaticResource Brush_Background}">
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid x:Name="TitleBar" Grid.Row="0" MouseDown="TitleBar_MouseDown" Background="Transparent" PreviewMouseDown="TitleBar_PreviewMouseDown">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">

                <ToggleButton x:Name="ButtonTheme" IsChecked="{Binding StateButtonTheme}" Style="{StaticResource TglThemeSwitch}" PreviewMouseLeftButtonUp="TitleButton_PreviewMouseLeftButtonUp"/>

                <Button x:Name="ButtonSettings" Style="{StaticResource TitleButtonSettings}" Margin="0,0,10,2" HorizontalAlignment="Right" VerticalAlignment="Center" PreviewMouseLeftButtonUp="TitleButton_PreviewMouseLeftButtonUp"/>

                <Button x:Name="ButtonMinimize" Style="{StaticResource TitleButtonMinimize}" Margin="0,0,0,2" HorizontalAlignment="Right" VerticalAlignment="Center" PreviewMouseLeftButtonUp="TitleButton_PreviewMouseLeftButtonUp"/>

                <Button x:Name="ButtonMaximize" Style="{StaticResource TitleButtonMaximize}" Margin="0,0,0,2" HorizontalAlignment="Right" VerticalAlignment="Center" PreviewMouseLeftButtonUp="TitleButton_PreviewMouseLeftButtonUp"/>

                <Button x:Name="ButtonClose" Style="{StaticResource TitleButtonClose}" Margin="0,0,5,2" HorizontalAlignment="Right" VerticalAlignment="Center" PreviewMouseLeftButtonUp="TitleButton_PreviewMouseLeftButtonUp"/>

            </StackPanel>

            <DockPanel VerticalAlignment="Center" HorizontalAlignment="Left" LastChildFill="True" Height="48">
                <Image Width="20" Height="20" Source="/GTweak.ico" Stretch="Uniform" DockPanel.Dock="Left" VerticalAlignment="Center" Margin="15,0,0,0" />
                <TextBlock x:Name="TitleName" Text="GTweak" FontSize="17" FontFamily="{StaticResource Jura}" Foreground="{StaticResource Brush_Accent}" VerticalAlignment="Center" Margin="10,0,20,0" TextTrimming="CharacterEllipsis" KeyboardNavigation.IsTabStop="False">
                    <TextBlock.Effect>
                        <DropShadowEffect BlurRadius="15" ShadowDepth="0" Opacity="0.7" Color="{StaticResource Color_Shadow}" />
                    </TextBlock.Effect>
                </TextBlock>
            </DockPanel>

            <DockPanel VerticalAlignment="Center" HorizontalAlignment="Center" LastChildFill="True" Height="40">
                <Grid Width="30" Height="30">
                    <Border BorderBrush="{StaticResource Brush_Accent}" CornerRadius="50" Width="30" Height="30" HorizontalAlignment="Left" VerticalAlignment="Center">
                        <Border CornerRadius="50">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.7" Color="{StaticResource Color_Shadow}" />
                            </Border.Effect>
                            <Border.Background>
                                <ImageBrush ImageSource="{Binding DisplayProfileAvatar, Mode=OneWay}" Stretch="Uniform"/>
                            </Border.Background>
                        </Border>
                    </Border>
                    <Path Stroke="{StaticResource Brush_Accent}" StrokeThickness="0.5" Stretch="Uniform">
                        <Path.Data>
                            <EllipseGeometry RadiusX="5" RadiusY="5"/>
                        </Path.Data>
                    </Path>
                </Grid>

                <TextBlock Width="Auto" Text="{Binding DisplayProfileName}" FontSize="17" FontFamily="{StaticResource Jura}" Foreground="{StaticResource Brush_Accent}" HorizontalAlignment="Right" VerticalAlignment="Center" KeyboardNavigation.IsTabStop="False" Margin="10,0,0,0">
                    <TextBlock.Effect>
                        <DropShadowEffect BlurRadius="15" ShadowDepth="0" Opacity="0.7" Color="{StaticResource Color_Shadow}" />
                    </TextBlock.Effect>
                </TextBlock>
            </DockPanel>
        </Grid>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="70"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border x:Name="SettingsPanel" Panel.ZIndex="10" Grid.Column="1" Width="400" HorizontalAlignment="Right" RenderTransformOrigin="1,0" Opacity="0.97" Background="{StaticResource Brush_Background}">
                <Border.RenderTransform>
                    <TranslateTransform X="400"/>
                </Border.RenderTransform>
                <Border.OpacityMask>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="Transparent" Offset="0.0"/>
                        <GradientStop Color="Black" Offset="0.03"/>
                        <GradientStop Color="Black" Offset="1.0"/>
                    </LinearGradientBrush>
                </Border.OpacityMask>

                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" CanContentScroll="True">
                    <Grid Width="400"  Margin="0"  VirtualizingStackPanel.IsVirtualizing="True">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid Grid.Row="0">
                            <TextBlock FontFamily="{StaticResource Jura}" Text="{DynamicResource title_settings_main}" Foreground="{StaticResource Brush_Accent}" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,10,0,0">
                                <TextBlock.Effect>
                                    <DropShadowEffect BlurRadius="20" ShadowDepth="1" Direction="-90" Color="{StaticResource Color_Shadow}" />
                                </TextBlock.Effect>
                            </TextBlock>
                            <Border Background="{StaticResource Brush_Separator}" Height="1.2" Width="330" VerticalAlignment="Bottom"  CornerRadius="10" Margin="0,50,0,0"/>
                        </Grid>

                        <Grid Grid.Row="1">
                            <StackPanel Orientation="Vertical">
                                <Viewbox HorizontalAlignment="Left" Stretch="Uniform" StretchDirection="DownOnly" Height="23" Margin="40,15,10,0">
                                    <uc:ToggleButton x:Name="BtnNotification" StateNA="{Binding IsViewNotification}" TextResource="{DynamicResource btgl_noty_main}" ChangedState="BtnNotification_ChangedState" />
                                </Viewbox>

                                <Viewbox HorizontalAlignment="Left" Stretch="Uniform" StretchDirection="DownOnly" Height="23" Margin="40,15,10,0">
                                    <uc:ToggleButton x:Name="BtnUpdate" StateNA="{Binding IsUpdateCheckRequired}" TextResource="{DynamicResource btgl_update_main}" ChangedState="BtnUpdate_ChangedState" />
                                </Viewbox>

                                <Viewbox HorizontalAlignment="Left" Stretch="Uniform" StretchDirection="DownOnly" Height="23" Margin="40,15,10,0">
                                    <uc:ToggleButton x:Name="BtnTopMost" StateNA="{Binding IsTopMost}" TextResource="{DynamicResource btgl_toast_main}" ChangedState="BtnTopMost_ChangedState"/>
                                </Viewbox>

                                <Viewbox HorizontalAlignment="Left" Stretch="Uniform" StretchDirection="DownOnly" Height="45" Margin="40,10,10,0">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                        <TextBlock Style="{StaticResource TextDefault}" Text="{DynamicResource slider_volume_main}"/>
                                        <ToggleButton x:Name="BtnVolume" IsChecked="{Binding IsPlayingSound, Mode=OneWay}" Width="20" Height="20" Margin="10,4,0,0" Style="{StaticResource TglVolume}" PreviewMouseLeftButtonUp="BtnVolume_PreviewMouseLeftButtonUp"/>
                                        <Slider x:Name="SliderVolume"  Style="{StaticResource Percent_Slider}"  Value="{Binding CurrentVolume, Mode=OneWay}"  IsSnapToTickEnabled="True" Minimum="0" Maximum="100" Margin="10,5,0,0"  Width="187" Height="12" ValueChanged="SliderVolume_ValueChanged"/>
                                    </StackPanel>
                                </Viewbox>

                                <Viewbox HorizontalAlignment="Left" Stretch="Uniform" StretchDirection="DownOnly" Height="45" Margin="40,10,10,0">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Top">
                                        <TextBlock Style="{StaticResource TextDefault}" Text="{DynamicResource cmbox_lang_main}"/>
                                        <ComboBox Style="{StaticResource CustomComboBoxStyle}" Margin="10,0,0,0" Height="33" ItemsSource="{Binding Languages}" SelectedValue="{Binding SelectedLanguage, Mode=TwoWay}" SelectedValuePath="Code" DisplayMemberPath="Display" />
                                    </StackPanel>
                                </Viewbox>

                                <Border Background="{StaticResource Brush_Separator}" Height="1.2" Width="330" VerticalAlignment="Bottom"  CornerRadius="10" Margin="0,10,0,0"/>

                                <StackPanel Orientation="Horizontal" Margin="0,20,0,0" Width="330">
                                    <Button Style="{StaticResource ButtonContent}" Height="55" Width="100" PreviewMouseLeftButtonUp="BtnExport_PreviewMouseLeftButtonUp" Cursor="Hand">
                                        <Viewbox Stretch="Uniform" Margin="-2">
                                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image>
                                                    <Image.Style>
                                                        <Style TargetType="{x:Type Image}">
                                                            <Setter Property="Source" Value="{StaticResource Icon_Export}"/>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <TextBlock Margin="0,2,0,0" Text="{DynamicResource btn_export}"/>
                                            </StackPanel>
                                        </Viewbox>
                                    </Button>
                                    <Button Margin="15,0,0,0" Style="{StaticResource ButtonContent_Inverted}" Height="55" Width="100" PreviewMouseLeftButtonUp="BtnImport_PreviewMouseLeftButtonUp">
                                        <Viewbox Stretch="Uniform" Margin="-2">
                                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image>
                                                    <Image.Style>
                                                        <Style TargetType="{x:Type Image}">
                                                            <Setter Property="Source" Value="{StaticResource Icon_Import}"/>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <TextBlock Margin="0,2,0,0" Text="{DynamicResource btn_import}"/>
                                            </StackPanel>
                                        </Viewbox>
                                    </Button>
                                    <Button Margin="15,0,0,0" Style="{StaticResource ButtonContent}" Height="55" Width="100" PreviewMouseLeftButtonUp="BtnDelete_PreviewMouseLeftButtonUp">
                                        <Viewbox Stretch="Uniform" Margin="-2">
                                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">
                                                <Image>
                                                    <Image.Style>
                                                        <Style TargetType="{x:Type Image}">
                                                            <Setter Property="Source" Value="{StaticResource Icon_SelfRemoval}"/>
                                                        </Style>
                                                    </Image.Style>
                                                </Image>
                                                <TextBlock Margin="0,2,0,0" Text="{DynamicResource btn_selfremove}"/>
                                            </StackPanel>
                                        </Viewbox>
                                    </Button>
                                </StackPanel>
                            </StackPanel>
                        </Grid>

                        <Grid Grid.Row="2" VerticalAlignment="Bottom" Margin="0,50,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="20,0,0,10" HorizontalAlignment="Left">
                                <Image x:Uid="git" Width="31" Height="auto" Cursor="Hand" PreviewMouseLeftButtonUp="BtnContacts_PreviewMouseLeftButtonUp">
                                    <Image.Style>
                                        <Style TargetType="{x:Type Image}" BasedOn="{StaticResource ImageHover}">
                                            <Setter Property="Source" Value="{StaticResource Icon_Git}"/>
                                        </Style>
                                    </Image.Style>
                                </Image>
                                <Image x:Uid="tg" Width="31" Height="auto" Cursor="Hand" PreviewMouseLeftButtonUp="BtnContacts_PreviewMouseLeftButtonUp">
                                    <Image.Style>
                                        <Style TargetType="{x:Type Image}" BasedOn="{StaticResource ImageHover}">
                                            <Setter Property="Source" Value="{StaticResource Icon_Telegram}"/>
                                        </Style>
                                    </Image.Style>
                                </Image>
                                <Image x:Uid="steam" Width="31" Height="auto" Cursor="Hand" PreviewMouseLeftButtonUp="BtnContacts_PreviewMouseLeftButtonUp">
                                    <Image.Style>
                                        <Style TargetType="{x:Type Image}" BasedOn="{StaticResource ImageHover}">
                                            <Setter Property="Source" Value="{StaticResource Icon_Steam}"/>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </StackPanel>

                            <TextBlock Grid.Column="1" Style="{StaticResource TextInactivity}" FontFamily="{StaticResource Play}" FontSize="12" Foreground="{StaticResource Brush_Inactive}" Text="{Binding DisplayTweakVersion}" VerticalAlignment="Center" Margin="0,0,20,10" HorizontalAlignment="Right"/>
                        </Grid>

                    </Grid>

                </ScrollViewer>
            </Border>

            <Border Background="#33000000" Opacity="0.7" CornerRadius="10" Margin="12,17,-3,47"/>
            <Border Background="{StaticResource Brush_Background_NavPanel}" CornerRadius="10" Margin="10,15,0,50"/>

            <Grid Grid.ColumnSpan="2" Panel.ZIndex="100" VerticalAlignment="Top">
                <Border Margin="0,15,0,50" MinWidth="70" MaxWidth="320" HorizontalAlignment="Left" ClipToBounds="True">
                    <ScrollViewer Padding="0,0,15,0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled"  CanContentScroll="True" FlowDirection="RightToLeft">
                        <StackPanel Orientation="Vertical" FlowDirection="LeftToRight">
                            <StackPanel.Effect>
                                <DropShadowEffect Opacity="0.2"/>
                            </StackPanel.Effect>

                            <RadioButton Name="BtnUtils" Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_utils_main}" Command="{Binding NavigateToUtilsCommand}" IsChecked="True" >
                                <ui:SymbolIcon Symbol="Toolbox20" FontSize="20"/>
                            </RadioButton>
                            
                            <RadioButton Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_conf_main}" Command="{Binding NavigateToConfidentialityCommand}">
                                <ui:SymbolIcon Symbol="PersonLock20" FontSize="20"/>
                            </RadioButton>

                            <RadioButton Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_int_main}" Command="{Binding NavigateToInterfaceCommand}">
                                <ui:SymbolIcon Symbol="Color20" FontSize="20"/>
                            </RadioButton>

                            <RadioButton Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_app_main}" Command="{Binding NavigateToPackagesCommand}">
                                <ui:SymbolIcon Symbol="Apps20" FontSize="20"/>
                            </RadioButton>

                            <RadioButton Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_svc_main}" Command="{Binding NavigateToServicesCommand}">
                                <ui:SymbolIcon Symbol="TaskListSquareLtr20" FontSize="20"/>
                            </RadioButton>

                            <RadioButton Style="{DynamicResource BtnNavigation}" Tag="{DynamicResource rbtn_sys_main}" Command="{Binding NavigateToSystemCommand}">
                                <ui:SymbolIcon Symbol="HardDrive20" FontSize="20"/>
                            </RadioButton>

                            <RadioButton Style="{StaticResource BtnNavigation}" Tag="{DynamicResource rbtn_sysinfo_main}" Command="{Binding NavigateToDataSystemCommand}">
                                <ui:SymbolIcon Symbol="Desktop20" FontSize="20"/>
                            </RadioButton>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
            <ContentControl Grid.Column="1" Content="{Binding CurrentView}" IsTabStop="False" KeyboardNavigation.TabNavigation="None" Margin="5,5,0,5"/>

        </Grid>

        <Border x:Name="UpdateBanner" Visibility="Collapsed" Grid.Row="2" Panel.ZIndex="200" Opacity="0" HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,10,0,0" Background="{StaticResource Brush_Background_NavPanel}" CornerRadius="7" Padding="10,10">
            <Border.RenderTransform>
                <TranslateTransform Y="-20"/>
            </Border.RenderTransform>
            <Border.Effect>
                <DropShadowEffect Opacity="0.3"/>
            </Border.Effect>
            <StackPanel Orientation="Horizontal">
                <StackPanel>
                    <DockPanel VerticalAlignment="Center" HorizontalAlignment="Left" LastChildFill="True">
                        <ui:SymbolIcon Symbol="Note16" FontSize="20px" Foreground="{StaticResource Brush_Accent}" Margin="15,0,0,0" HorizontalAlignment="Center"/>
                        <TextBlock Style="{StaticResource TextDefault}" Text="{DynamicResource title_update}" Margin="5,0,0,0"/>
                    </DockPanel>
                    <TextBlock Style="{StaticResource TextDefault}" Margin="15,0,0,0">
                        <Run Text="{Binding CurrentVersion, Mode=OneWay}" Foreground="{StaticResource Brush_Accent}"/>
                        <Run Text="➔"/>
                        <Run Text="{Binding DownloadVersion, Mode=OneWay}" Foreground="{StaticResource Brush_Accent}"/>
                    </TextBlock>
                </StackPanel>
                <Button Content="{DynamicResource btn_upd}" Style="{StaticResource ButtonContent}" HorizontalAlignment="Right" Margin="50,0,0,0" PreviewMouseLeftButtonUp="BtnUpdate_PreviewMouseLeftButtonUp"/>
            </StackPanel>
        </Border>

    </Grid>
</ui:FluentWindow>